<?xml version="1.0" encoding="UTF-8"?>
<xml-fragment xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config">
  <ser:coreEntry isProxy="true" isEnabled="true" isAutoPublish="false" isTracingEnabled="false">
    <ser:binding type="SOAP" isSoap12="false" xsi:type="con:SoapBindingType" xmlns:con="http://www.bea.com/wli/sb/services/bindings/config">
      <con:wsdl ref="ITEL/Core/Resources/WSDLs/validarTrama_PS"/>
      <con:port>
        <con:name>ValidarTramaSOAP</con:name>
        <con:namespace>http://www.comcel.com.co/ValidarTrama/</con:namespace>
      </con:port>
      <con:selector type="SOAP body"/>
    </ser:binding>
    <ser:monitoring isEnabled="false">
      <ser:aggregationInterval>10</ser:aggregationInterval>
      <ser:pipelineMonitoringLevel>Pipeline</ser:pipelineMonitoringLevel>
    </ser:monitoring>
    <ser:reporting>true</ser:reporting>
    <ser:logging isEnabled="true">
      <ser:logLevel>debug</ser:logLevel>
    </ser:logging>
    <ser:sla-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:sla-alerting>
    <ser:pipeline-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:pipeline-alerting>
    <ser:ws-policy>
      <ser:binding-mode>wsdl-policy-attachments</ser:binding-mode>
    </ser:ws-policy>
  </ser:coreEntry>
  <ser:endpointConfig>
    <tran:provider-id>local</tran:provider-id>
    <tran:inbound>true</tran:inbound>
    <tran:inbound-properties/>
    <tran:all-headers>true</tran:all-headers>
  </ser:endpointConfig>
  <ser:router>
    <con:pipeline type="request" name="PipelinePairNode1_request">
      <con:stage name="inicializacion">
        <con:context/>
        <con:actions>
          <con1:assign varName="tiempoInicio">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-7952</con2:id>
            <con1:expr>
              <con2:xqueryText>fn:current-dateTime()</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="codigoError">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-77c6</con2:id>
            <con1:expr>
              <con2:xqueryText>"1"</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="inDestino">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-6724</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="plataforma">
            <con2:id>_ActionId-4242700229346518817-3201da9e.1389a7756a8.-7fe5</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="inOrigen">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-6721</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="timeoutValidacion">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-7593</con2:id>
            <con1:expr>
              <con2:xqueryText>0</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="timeoutConsulta">
            <con2:id>_ActionId-1221286005379866550-2eef8a52.133dad8f688.-7feb</con2:id>
            <con1:expr>
              <con2:xqueryText>0</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="timeoutProvision">
            <con2:id>_ActionId-1221286005379866550-2eef8a52.133dad8f688.-7fed</con2:id>
            <con1:expr>
              <con2:xqueryText>0</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="timeoutFinal">
            <con2:id>_ActionId-1221286005379866550-2eef8a52.133dad8f688.-7fef</con2:id>
            <con1:expr>
              <con2:xqueryText>0</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="contrato">
            <con2:id>_ActionId-3942861544137076758-6df4cc71.134332be51d.-7dd1</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="categoria">
            <con2:id>_ActionId-3942861544137076758-6df4cc71.134332be51d.-7b3d</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="cargaInicial">
            <con2:id>_ActionId-3942861544137076758-6df4cc71.134332be51d.-7b3a</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="bloquea">
            <con2:id>_ActionId-3942861544137076758-6df4cc71.134332be51d.-7b37</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="postpago">
            <con2:id>_ActionId-3942861544137076758-6df4cc71.134332be51d.-7ae7</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="vigencia">
            <con2:id>_ActionId-964004872606951551-7a2ae4fc.134571caa37.-7fd6</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
        </con:actions>
      </con:stage>
      <con:stage name="protocolo" errorHandler="_onErrorHandler-3166700838857645387--551f9b11.133cb9965be.-7a5a">
        <con:context>
          <con2:varNsDecl namespace="http://www.comcel.com.co/ValidarTrama/" prefix="val"/>
        </con:context>
        <con:actions>
          <con1:validate>
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-7a5b</con2:id>
            <con1:schema ref="ITEL/Core/Resources/Schemas/PS_ITEL_VALIDARTRAMA"/>
            <con1:schemaElement xmlns:val="http://www.comcel.com.co/ValidarTrama/">val:Input_Parameters</con1:schemaElement>
            <con1:varName>body</con1:varName>
            <con1:location>
              <con2:xpathText>./val:Input_Parameters</con2:xpathText>
            </con1:location>
            <con1:resultVarName/>
          </con1:validate>
          <con1:assign varName="trama">
            <con2:id>_ActionId-1221286005379866550-2eef8a52.133dad8f688.-7ffe</con2:id>
            <con1:expr>
              <con2:xqueryText>data($body/val:Input_Parameters/TRAMA)</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="protocoloValido">
            <con2:id>_ActionId-1221286005379866550-2eef8a52.133dad8f688.-7ff7</con2:id>
            <con1:expr>
              <con2:xqueryTransform>
                <con2:resource ref="ITEL/Core/Resources/XQueries/protocoloValido"/>
                <con2:param name="trama">
                  <con2:path>$trama</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:ifThenElse>
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-6f2a</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText>$protocoloValido = "0"</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="codigoError">
                  <con2:id>_ActionId-1221286005379866550-2eef8a52.133dad8f688.-7ff2</con2:id>
                  <con1:expr>
                    <con2:xqueryText>"913"</con2:xqueryText>
                  </con1:expr>
                </con1:assign>
              </con1:actions>
            </con1:case>
            <con1:default/>
          </con1:ifThenElse>
          <con1:assign varName="tramaXML">
            <con2:id>_ActionId-1221286005379866550-2eef8a52.133dad8f688.-7ffc</con2:id>
            <con1:expr>
              <con2:xqueryTransform>
                <con2:resource ref="ITEL/Core/Resources/XQueries/descomponerTrama"/>
                <con2:param name="trama">
                  <con2:path>$trama</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
        </con:actions>
      </con:stage>
      <con:stage name="general" errorHandler="_onErrorHandler-5397323786778872077-1949b508.13aae0241a8.-7fad">
        <con:context>
          <con2:varNsDecl namespace="http://www.comcel.com.co/DA_TRAMA" prefix="da"/>
        </con:context>
        <con:actions>
          <con1:ifThenElse>
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-7779</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText>$codigoError = "1"</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:ifThenElse>
                  <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-7772</con2:id>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>fn:string-length(data($tramaXML/da:MIN)) != 10 or string(number(data($tramaXML/da:MIN))) = 'NaN'</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:assign varName="codigoError">
                        <con2:id>_ActionId-8096952212429106120-1bbaa577.15405e544f1.-7d4e</con2:id>
                        <con1:expr>
                          <con2:xqueryText>"906"</con2:xqueryText>
                        </con1:expr>
                      </con1:assign>
                    </con1:actions>
                  </con1:case>
                  <con1:default>
                    <con1:wsCallout>
                      <con2:id>_ActionId-2136336732977611116--dc1d08e.135f94a5c3d.-7f98</con2:id>
                      <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/validacionGeneralLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                      <con1:operation>validacionGeneral</con1:operation>
                      <con1:request>
                        <con1:body>$generalRequest</con1:body>
                      </con1:request>
                      <con1:response>
                        <con1:body>generalResponse</con1:body>
                      </con1:response>
                      <con1:requestTransform>
                        <con1:assign varName="generalRequest">
                          <con2:id>_ActionId-2136336732977611116--dc1d08e.135f94a5c3d.-7f99</con2:id>
                          <con1:expr>
                            <con2:xqueryTransform>
                              <con2:resource ref="ITEL/Core/Resources/XQueries/validarTrama_Req_validacionGeneral"/>
                              <con2:param name="tramaXML">
                                <con2:path>$tramaXML</con2:path>
                              </con2:param>
                            </con2:xqueryTransform>
                          </con1:expr>
                        </con1:assign>
                      </con1:requestTransform>
                      <con1:responseTransform>
                        <con1:ifThenElse>
                          <con2:id>_ActionId-5397323786778872077-1949b508.13aae0241a8.-75ec</con2:id>
                          <con1:case>
                            <con1:condition>
                              <con2:xqueryText>data($generalResponse/CODIGO) = "ERROR"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                              <con1:assign varName="codigoError">
                                <con2:id>_ActionId-5397323786778872077-1949b508.13aae0241a8.-75c8</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>"909"</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                            </con1:actions>
                          </con1:case>
                          <con1:default>
                            <con1:assign varName="codigoError">
                              <con2:id>_ActionId-5397323786778872077-1949b508.13aae0241a8.-75c6</con2:id>
                              <con1:expr>
                                <con2:xqueryText>data($generalResponse/MENSAJE/CODERROR)</con2:xqueryText>
                              </con1:expr>
                            </con1:assign>
                          </con1:default>
                        </con1:ifThenElse>
                        <con1:ifThenElse>
                          <con2:id>_ActionId-2136336732977611116--dc1d08e.135f94a5c3d.-7f51</con2:id>
                          <con1:case>
                            <con1:condition>
                              <con2:xqueryText>$codigoError = "1"</con2:xqueryText>
                            </con1:condition>
                            <con1:actions>
                              <con1:assign varName="inDestino">
                                <con2:id>_ActionId-2136336732977611116--dc1d08e.135f94a5c3d.-7f3c</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>data($generalResponse/MENSAJE/RMCCODIGOIN)</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                              <con1:assign varName="plataforma">
                                <con2:id>_ActionId-4242700229346518817-3201da9e.1389a7756a8.-7fc7</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>data($generalResponse/MENSAJE/PLATAFORMA)</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                              <con1:assign varName="timeoutValidacion">
                                <con2:id>_ActionId-2136336732977611116--dc1d08e.135f94a5c3d.-7f16</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>data($generalResponse/MENSAJE/CMTIMEOUTVALIDACION)</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                              <con1:assign varName="timeoutConsulta">
                                <con2:id>_ActionId-2136336732977611116--dc1d08e.135f94a5c3d.-7ef0</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>data($generalResponse/MENSAJE/CMTIMEOUTCONSULTA)</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                              <con1:assign varName="timeoutProvision">
                                <con2:id>_ActionId-2136336732977611116--dc1d08e.135f94a5c3d.-7edb</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>data($generalResponse/MENSAJE/CMTIMEOUTPROVISION)</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                              <con1:assign varName="timeoutFinal">
                                <con2:id>_ActionId-2136336732977611116--dc1d08e.135f94a5c3d.-7eb9</con2:id>
                                <con1:expr>
                                  <con2:xqueryText>data($generalResponse/MENSAJE/CMTIMEOUTFINAL)</con2:xqueryText>
                                </con1:expr>
                              </con1:assign>
                            </con1:actions>
                          </con1:case>
                          <con1:default/>
                        </con1:ifThenElse>
                      </con1:responseTransform>
                    </con1:wsCallout>
                  </con1:default>
                </con1:ifThenElse>
              </con1:actions>
            </con1:case>
            <con1:default/>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="especifica">
        <con:context xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con5="http://www.bea.com/wli/sb/stages/publish/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
          <con2:userNsDecl namespace="http://www.comcel.com.co/DA_TRAMA" prefix="da"/>
          <con2:userNsDecl namespace="http://www.comcel.com.co/ConsultarContract" prefix="con"/>
          <con2:userNsDecl namespace="http://www.comcel.com.co/ConsultarDatosMercadeo" prefix="con2"/>
          <con2:varNsDecl namespace="http://www.comcel.com.co/ValidarTrama/" prefix="val"/>
        </con:context>
        <con:actions xmlns:con3="http://www.bea.com/wli/sb/typesystem/config" xmlns:con5="http://www.bea.com/wli/sb/stages/publish/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
          <con1:assign varName="tiempoGeneral">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70c5</con2:id>
            <con1:expr>
              <con2:xqueryText>fn:current-dateTime()</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:ifThenElse>
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70c3</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText>$codigoError = "1"</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="operacion">
                  <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70c1</con2:id>
                  <con1:expr>
                    <con2:xqueryText>data($tramaXML/da:METODO)</con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:ifThenElse>
                  <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70b3</con2:id>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = ("400","408","411")</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70b1</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama400/Proxies/validarTrama400Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama400</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70b2</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama400/Resources/XQueries/validarTrama400_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:comment>https://forums.oracle.com/forums/thread.jspa?threadID=2392627</con2:comment>
                        <con2:id>_ActionId-2883577540949710205--6e2d26f9.138d97a2861.-7e16</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1" and data($generalResponse/MENSAJE/RMCCODIGOIN) >= 50 and data($validarTramaResponse/MENSAJE/MONTORECARGA) = "0"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="codigoError">
                              <con2:id>_ActionId-2883577540949710205--6e2d26f9.138d97a2861.-7e03</con2:id>
                              <con1:expr>
                                <con2:xqueryText>"940"</con2:xqueryText>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-1024557091068085480-325a112b.13e7d371987.-7792</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = ("408")</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:wsCallout>
                              <con2:id>_ActionId-1024557091068085480-325a112b.13e7d371987.-7762</con2:id>
                              <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarConsecutivoLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                              <con1:operation>consultarConsecutivo</con1:operation>
                              <con1:request>
                                <con1:body>$consultarConsecutivoRequest</con1:body>
                              </con1:request>
                              <con1:response>
                                <con1:body>consultarConsecutivoResponse</con1:body>
                              </con1:response>
                              <con1:requestTransform>
                                <con1:assign varName="consultarConsecutivoRequest">
                                  <con2:id>_ActionId-1024557091068085480-325a112b.13e7d371987.-773a</con2:id>
                                  <con1:expr>
                                    <con2:xqueryTransform>
                                      <con2:resource ref="ITEL/Core/Resources/XQueries/consultarConsecutivo_Req_ValidarTrama"/>
                                      <con2:param name="consecutivo">
                                        <con2:path>data($validarTramaResponse/MENSAJE/CONSECUTIVO)</con2:path>
                                      </con2:param>
                                    </con2:xqueryTransform>
                                  </con1:expr>
                                </con1:assign>
                              </con1:requestTransform>
                              <con1:responseTransform>
                                <con1:ifThenElse>
                                  <con2:id>_ActionId-1024557091068085480-325a112b.13e7d371987.-76dc</con2:id>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($consultarConsecutivoResponse/CODIGO) = '1'</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-1024557091068085480-325a112b.13e7d371987.-7659</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"912"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:default/>
                                </con1:ifThenElse>
                              </con1:responseTransform>
                            </con1:wsCallout>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "401"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70af</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama401/Proxies/validarTrama401Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama401</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70b0</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama401/Resources/XQueries/validarTrama401_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-2883577540949710205--6e2d26f9.138d97a2861.-7dbf</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1" and data($generalResponse/MENSAJE/RMCCODIGOIN) >= 50 and data($validarTramaResponse/MENSAJE/MONTORECARGA) = "0"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="codigoError">
                              <con2:id>_ActionId-2883577540949710205--6e2d26f9.138d97a2861.-7d8c</con2:id>
                              <con1:expr>
                                <con2:xqueryText>"940"</con2:xqueryText>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "402"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70ad</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama402/Proxies/validarTrama402Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama402</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70ae</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama402/Resources/XQueries/validarTrama402_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-2883577540949710205--6e2d26f9.138d97a2861.-7d54</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1" and data($generalResponse/MENSAJE/RMCCODIGOIN) >= 50 and data($validarTramaResponse/MENSAJE/MONTORECARGA) = "0"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="codigoError">
                              <con2:id>_ActionId-2883577540949710205--6e2d26f9.138d97a2861.-7d3d</con2:id>
                              <con1:expr>
                                <con2:xqueryText>"940"</con2:xqueryText>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "403"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70ab</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama403/Proxies/validarTrama403Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama403</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70ac</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama403/Resources/XQueries/validarTrama403_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-2883577540949710205--6e2d26f9.138d97a2861.-7d07</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1" and data($generalResponse/MENSAJE/RMCCODIGOIN) >= 50 and data($validarTramaResponse/MENSAJE/MONTORECARGA) = "0"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="codigoError">
                              <con2:id>_ActionId-2883577540949710205--6e2d26f9.138d97a2861.-7cf0</con2:id>
                              <con1:expr>
                                <con2:xqueryText>"940"</con2:xqueryText>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "405"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70a9</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama405/Proxies/validarTrama405Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama405</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70aa</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama405/Resources/XQueries/validarTrama405_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "410"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-4921274548082121420--69da317d.1453d141c80.-7fd2</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama410/Proxies/validarTrama410Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama410</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-4921274548082121420--69da317d.1453d141c80.-7fcc</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama410/Resources/XQueries/validarTrama410_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "406"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70a7</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama406/Proxies/validarTrama406Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama406</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-70a8</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama406/Resources/XQueries/validarTrama406_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                                <con2:param name="in">
                                  <con2:path>$inDestino</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "407"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-1209263794195234693-115efea3.139685a7a9b.-6e57</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama407/Proxies/validarTrama407Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama407</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-1209263794195234693-115efea3.139685a7a9b.-6e58</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama407/Resources/XQueries/validarTrama407_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "409"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3738246199404536167--3fed7bd5.13f7be9077c.-742d</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama409/Proxies/validarTrama409Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama409</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3738246199404536167--3fed7bd5.13f7be9077c.-742e</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama409/Resources/Xqueries/validarTrama409_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "414"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-2253312439982545409-5f03a207.1531049037b.-67a4</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama414/Proxies/validarTrama414Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama414</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-2253312439982545409-5f03a207.1531049037b.-671a</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama414/Resources/XQueries/validarTrama414_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform>
                          <con1:ifThenElse>
                            <con2:id>_ActionId-2253312439982545409-5f03a207.1531049037b.-65c7</con2:id>
                            <con1:case>
                              <con1:condition>
                                <con2:xqueryText>data($validarTramaResponse/MENSAJE/MINORIGEN) = data($tramaXML/da:MIN)</con2:xqueryText>
                              </con1:condition>
                              <con1:actions>
                                <con1:assign varName="codigoError">
                                  <con2:id>_ActionId-2253312439982545409-5f03a207.1531049037b.-658f</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>"912"</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                                <con2:skip>
                                  <con2:id>_ActionId-2253312439982545409-5f03a207.1531049037b.-6572</con2:id>
                                </con2:skip>
                              </con1:actions>
                            </con1:case>
                            <con1:default/>
                          </con1:ifThenElse>
                        </con1:responseTransform>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "415"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-8044975483918427659-3220e920.15853e81890.-7f60</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama415/Proxies/validarTrama415Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama415</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-8044975483918427659-3220e920.15853e81890.-7f2c</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama415/Resources/XQueries/validarTrama415_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "200"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-791b</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama200/Proxies/validarTrama200Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama200</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-791c</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama200/Resources/XQueries/validarTrama200_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "500"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-6957142443986133387--18dd92a.1350b41ec2a.-7f46</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama500/Proxies/validarTrama500Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama500</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-6957142443986133387--18dd92a.1350b41ec2a.-7f21</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama500/Resources/XQueries/validarTrama500_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "502"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-4132889789295945889--4dae96c2.145d822b89c.-7f0a</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama502/Proxies/validarTrama502Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama502</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-4132889789295945889--4dae96c2.145d822b89c.-7e9c</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama502/Resources/Xqueries/validarTrama502_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "503"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-4121053732405088544-7ebba738.158cfb81d2a.-7eac</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama503/Proxies/validarTrama503Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama503</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-4121053732405088544-7ebba738.158cfb81d2a.-7e8e</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama503/Resources/Xqueries/validarTrama503_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/*:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "600"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-1145601977861204864-1e8ed72e.134379a4e9f.-7e9e</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama600/Proxies/validarTrama600_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama600</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:comment>Concatena el MIN con el nmero al que se desea cambiar en la variable parmetros</con2:comment>
                            <con2:id>_ActionId-1145601977861204864-1e8ed72e.134379a4e9f.-7e6d</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama600/Resources/XQueries/validarTrama600_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "601"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7108</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama601/Proxies/validarTrama601Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama601</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7109</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama601/Resources/XQueries/validarTrama601_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-3942861544137076758-6df4cc71.134332be51d.-7f23</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-766b</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>number($generalResponse/MENSAJE/RMCCODIGOIN) &lt; 50</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:wsCallout>
                                    <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7667</con2:id>
                                    <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarContratoLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>consultarContract</con1:operation>
                                    <con1:request>
                                      <con1:body>$contratoRequest</con1:body>
                                    </con1:request>
                                    <con1:response>
                                      <con1:body>contratoResponse</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                      <con1:assign varName="contratoRequest">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7668</con2:id>
                                        <con1:expr>
                                          <con2:xqueryTransform>
                                            <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_consultarContrato"/>
                                            <con2:param name="spcode">
                                              <con2:path>data($validarTramaResponse/MENSAJE/SPCODE)</con2:path>
                                            </con2:param>
                                            <con2:param name="tmcode">
                                              <con2:path>data($validarTramaResponse/MENSAJE/TMCODE)</con2:path>
                                            </con2:param>
                                          </con2:xqueryTransform>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                  </con1:wsCallout>
                                  <con1:ifThenElse>
                                    <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7660</con2:id>
                                    <con1:case>
                                      <con1:condition>
                                        <con2:xqueryText>data($contratoResponse/con:CODIGO) != "1"</con2:xqueryText>
                                      </con1:condition>
                                      <con1:actions>
                                        <con1:assign varName="codigoError ">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-765f</con2:id>
                                          <con1:expr>
                                            <con2:xqueryText>"909"</con2:xqueryText>
                                          </con1:expr>
                                        </con1:assign>
                                        <con2:skip>
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-765e</con2:id>
                                        </con2:skip>
                                      </con1:actions>
                                    </con1:case>
                                    <con1:case>
                                      <con1:condition>
                                        <con2:xqueryText>data($contratoResponse/con:MENSAJE/con:CONTRACT) = "NO_DATA"</con2:xqueryText>
                                      </con1:condition>
                                      <con1:actions>
                                        <con1:assign varName="codigoError ">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-765d</con2:id>
                                          <con1:expr>
                                            <con2:xqueryText>"933"</con2:xqueryText>
                                          </con1:expr>
                                        </con1:assign>
                                        <con2:skip>
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-765c</con2:id>
                                        </con2:skip>
                                      </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                      <con1:assign varName="contrato">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-765b</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>data($contratoResponse/con:MENSAJE/con:CONTRACT)</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:default>
                                  </con1:ifThenElse>
                                </con1:actions>
                              </con1:case>
                              <con1:default>
                                <con1:wsCallout>
                                  <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-757b</con2:id>
                                  <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarContractTemplateServiceClassLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                  <con1:operation>consultarConTempSC</con1:operation>
                                  <con1:request>
                                    <con1:body>$contractTemplateRequest</con1:body>
                                  </con1:request>
                                  <con1:response>
                                    <con1:body>contractTemplateResponse</con1:body>
                                  </con1:response>
                                  <con1:requestTransform>
                                    <con1:assign varName="contractTemplateRequest">
                                      <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-757c</con2:id>
                                      <con1:expr>
                                        <con2:xqueryTransform>
                                          <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_consultarContractTemplate"/>
                                          <con2:param name="spcode">
                                            <con2:path>data($validarTramaResponse/MENSAJE/SPCODE)</con2:path>
                                          </con2:param>
                                          <con2:param name="tmcode">
                                            <con2:path>data($validarTramaResponse/MENSAJE/TMCODE)</con2:path>
                                          </con2:param>
                                        </con2:xqueryTransform>
                                      </con1:expr>
                                    </con1:assign>
                                  </con1:requestTransform>
                                  <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:ifThenElse>
                                  <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7440</con2:id>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($contractTemplateResponse/CODIGO) != "OK"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError ">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-743f</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"909"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con2:skip>
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-743e</con2:id>
                                      </con2:skip>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($contractTemplateResponse/MENSAJE/CONTRACT_TEMPLATE) = "NO_DATA"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError ">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-743d</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"933"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con2:skip>
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-743c</con2:id>
                                      </con2:skip>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:default>
                                    <con1:assign varName="contrato">
                                      <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-73fc</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($contractTemplateResponse/MENSAJE/SERVICE_CLASS)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                    <con1:assign varName="categoria">
                                      <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-73fa</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>fn:string-join( (data($contractTemplateResponse/MENSAJE/FAFIDS/FAFID)) ,";")</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                    <con1:assign varName="cargaInicial">
                                      <con2:id>_ActionId-5226781073812836962-15d53666.139f8e33b25.-649a</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($contractTemplateResponse/MENSAJE/FAFIDGROUP)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                    <con1:assign varName="postpago">
                                      <con2:id>_ActionId-7289227227976692718--7360c13a.149cf07ee36.-7e59</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($contractTemplateResponse/MENSAJE/ESPOSTPAGO)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                  </con1:default>
                                </con1:ifThenElse>
                              </con1:default>
                            </con1:ifThenElse>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "604"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-72bd</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama604/Proxies/validarTrama604Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama604</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-72ac</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama604/Resources/XQueries/validarTrama604_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-728a</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:wsCallout>
                              <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-725d</con2:id>
                              <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarContractTemplateServiceClassOfferLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                              <con1:operation>consultarConTempSCOffer</con1:operation>
                              <con1:request>
                                <con1:body>$contractTemplateRequest</con1:body>
                              </con1:request>
                              <con1:response>
                                <con1:body>contractTemplateResponse</con1:body>
                              </con1:response>
                              <con1:requestTransform>
                                <con1:assign varName="contractTemplateRequest">
                                  <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-6ed0</con2:id>
                                  <con1:expr>
                                    <con2:xqueryTransform>
                                      <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_consultarContractTemplateOffer"/>
                                      <con2:param name="offer">
                                        <con2:path>data($validarTramaResponse/MENSAJE/OFFER)</con2:path>
                                      </con2:param>
                                    </con2:xqueryTransform>
                                  </con1:expr>
                                </con1:assign>
                              </con1:requestTransform>
                              <con1:responseTransform/>
                            </con1:wsCallout>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-7009</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>data($contractTemplateResponse/CODIGO) != "OK"</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:assign varName="codigoError">
                                    <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-6f91</con2:id>
                                    <con1:expr>
                                      <con2:xqueryText>"909"</con2:xqueryText>
                                    </con1:expr>
                                  </con1:assign>
                                  <con2:skip>
                                    <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-6f0f</con2:id>
                                  </con2:skip>
                                </con1:actions>
                              </con1:case>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>data($contractTemplateResponse/MENSAJE/CONTRACT_TEMPLATE) = "NO_DATA"</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:assign varName="codigoError">
                                    <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-6f78</con2:id>
                                    <con1:expr>
                                      <con2:xqueryText>"933"</con2:xqueryText>
                                    </con1:expr>
                                  </con1:assign>
                                  <con2:skip>
                                    <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-6eed</con2:id>
                                  </con2:skip>
                                </con1:actions>
                              </con1:case>
                              <con1:default>
                                <con1:assign varName="contrato">
                                  <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-6f6a</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>data($contractTemplateResponse/MENSAJE/SERVICE_CLASS)</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                                <con1:assign varName="categoria">
                                  <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-6f57</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>fn:string-join( (data($contractTemplateResponse/MENSAJE/FAFIDS/FAFID)) ,";")</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                                <con1:assign varName="cargaInicial">
                                  <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-6f3e</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>data($contractTemplateResponse/MENSAJE/FAFIDGROUP)</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                                <con1:assign varName="postpago">
                                  <con2:id>_ActionId-7289227227976692718--7360c13a.149cf07ee36.-7e03</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>data($contractTemplateResponse/MENSAJE/ESPOSTPAGO)</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                              </con1:default>
                            </con1:ifThenElse>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "100"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3942861544137076758-6df4cc71.134332be51d.-7cbc</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama100/Proxies/validarTrama100Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama100</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3942861544137076758-6df4cc71.134332be51d.-7cbd</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama100/Resources/XQueries/validarTrama100_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-3942861544137076758-6df4cc71.134332be51d.-7cbb</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7faf</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>number($generalResponse/MENSAJE/RMCCODIGOIN) &lt; 50</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:wsCallout>
                                    <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7fab</con2:id>
                                    <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarContratoLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>consultarContract</con1:operation>
                                    <con1:request>
                                      <con1:body>$contratoRequest</con1:body>
                                    </con1:request>
                                    <con1:response>
                                      <con1:body>contratoResponse</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                      <con1:assign varName="contratoRequest">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7fac</con2:id>
                                        <con1:expr>
                                          <con2:xqueryTransform>
                                            <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_consultarContrato"/>
                                            <con2:param name="spcode">
                                              <con2:path>data($validarTramaResponse/MENSAJE/SPCODE)</con2:path>
                                            </con2:param>
                                            <con2:param name="tmcode">
                                              <con2:path>data($validarTramaResponse/MENSAJE/TMCODE)</con2:path>
                                            </con2:param>
                                          </con2:xqueryTransform>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                  </con1:wsCallout>
                                  <con1:ifThenElse>
                                    <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f95</con2:id>
                                    <con1:case>
                                      <con1:condition>
                                        <con2:xqueryText>data($contratoResponse/con:CODIGO) != "1"</con2:xqueryText>
                                      </con1:condition>
                                      <con1:actions>
                                        <con1:assign varName="codigoError ">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f94</con2:id>
                                          <con1:expr>
                                            <con2:xqueryText>"909"</con2:xqueryText>
                                          </con1:expr>
                                        </con1:assign>
                                        <con2:skip>
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f93</con2:id>
                                        </con2:skip>
                                      </con1:actions>
                                    </con1:case>
                                    <con1:case>
                                      <con1:condition>
                                        <con2:xqueryText>data($contratoResponse/con:MENSAJE/con:CONTRACT) = "NO_DATA"</con2:xqueryText>
                                      </con1:condition>
                                      <con1:actions>
                                        <con1:assign varName="codigoError ">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f92</con2:id>
                                          <con1:expr>
                                            <con2:xqueryText>"933"</con2:xqueryText>
                                          </con1:expr>
                                        </con1:assign>
                                        <con2:skip>
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f91</con2:id>
                                        </con2:skip>
                                      </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                      <con1:assign varName="contrato">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f90</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>data($contratoResponse/con:MENSAJE/con:CONTRACT)</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con1:assign varName="postpago">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f8f</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>data($contratoResponse/con:MENSAJE/con:ESPOSTPAGO)</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:default>
                                  </con1:ifThenElse>
                                  <con1:wsCallout>
                                    <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f8b</con2:id>
                                    <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarDatosMercadeoLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con1:operation>consultarDatosMercadeo</con1:operation>
                                    <con1:request>
                                      <con1:body>$mercadeoRequest</con1:body>
                                    </con1:request>
                                    <con1:response>
                                      <con1:body>mercadeoResponse</con1:body>
                                    </con1:response>
                                    <con1:requestTransform>
                                      <con1:assign varName="mercadeoRequest">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f8c</con2:id>
                                        <con1:expr>
                                          <con2:xqueryTransform>
                                            <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_consultarDatosMercadeo"/>
                                            <con2:param name="codigoMaterial">
                                              <con2:path>data($validarTramaResponse/MENSAJE/CODIGOMATERIAL)</con2:path>
                                            </con2:param>
                                          </con2:xqueryTransform>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:requestTransform>
                                    <con1:responseTransform/>
                                  </con1:wsCallout>
                                  <con1:ifThenElse>
                                    <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f83</con2:id>
                                    <con1:case>
                                      <con1:condition>
                                        <con2:xqueryText>data($mercadeoResponse/con2:CODIGO) != "1"</con2:xqueryText>
                                      </con1:condition>
                                      <con1:actions>
                                        <con1:assign varName="codigoError">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f82</con2:id>
                                          <con1:expr>
                                            <con2:xqueryText>"909"</con2:xqueryText>
                                          </con1:expr>
                                        </con1:assign>
                                      </con1:actions>
                                    </con1:case>
                                    <con1:case>
                                      <con1:condition>
                                        <con2:xqueryText>data($mercadeoResponse/con2:MENSAJE/con2:EXITO) = "NO_DATA"</con2:xqueryText>
                                      </con1:condition>
                                      <con1:actions>
                                        <con1:assign varName="codigoError">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f81</con2:id>
                                          <con1:expr>
                                            <con2:xqueryText>"932"</con2:xqueryText>
                                          </con1:expr>
                                        </con1:assign>
                                      </con1:actions>
                                    </con1:case>
                                    <con1:default>
                                      <con1:assign varName="categoria">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f80</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>data($mercadeoResponse/con2:MENSAJE/con2:CATEGORIA)</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con1:assign varName="cargaInicial">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f7f</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>data($mercadeoResponse/con2:MENSAJE/con2:CARGAINICIAL)</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con1:assign varName="bloquea">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f7e</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>data($mercadeoResponse/con2:MENSAJE/con2:BLOQUEA)</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con1:assign varName="vigencia">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7f7d</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>data($mercadeoResponse/con2:MENSAJE/con2:VIGENCIA)</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:default>
                                  </con1:ifThenElse>
                                </con1:actions>
                              </con1:case>
                              <con1:default>
                                <con1:assign varName="vigencia">
                                  <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7722</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>data($generalResponse/MENSAJE/SDP)</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                                <con1:wsCallout>
                                  <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7ed0</con2:id>
                                  <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarContractTemplateServiceClassLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                  <con1:operation>consultarConTempSC</con1:operation>
                                  <con1:request>
                                    <con1:body>$contractTemplateRequest</con1:body>
                                  </con1:request>
                                  <con1:response>
                                    <con1:body>contractTemplateResponse</con1:body>
                                  </con1:response>
                                  <con1:requestTransform>
                                    <con1:assign varName="contractTemplateRequest">
                                      <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7ed1</con2:id>
                                      <con1:expr>
                                        <con2:xqueryTransform>
                                          <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_consultarContractTemplate"/>
                                          <con2:param name="spcode">
                                            <con2:path>data($validarTramaResponse/MENSAJE/SPCODE)</con2:path>
                                          </con2:param>
                                          <con2:param name="tmcode">
                                            <con2:path>data($validarTramaResponse/MENSAJE/TMCODE)</con2:path>
                                          </con2:param>
                                        </con2:xqueryTransform>
                                      </con1:expr>
                                    </con1:assign>
                                  </con1:requestTransform>
                                  <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:ifThenElse>
                                  <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7e11</con2:id>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($contractTemplateResponse/CODIGO) != "OK"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError ">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7e10</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"909"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con2:skip>
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7e0f</con2:id>
                                      </con2:skip>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($contractTemplateResponse/MENSAJE/CONTRACT_TEMPLATE) = "NO_DATA"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError ">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7e0e</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"933"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con2:skip>
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7e0d</con2:id>
                                      </con2:skip>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:default>
                                    <con1:assign varName="inOrigen">
                                      <con2:id>_ActionId-7289227227976692718--7360c13a.149cf07ee36.-79bc</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($contractTemplateResponse/MENSAJE/SERVICE_CLASS)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                    <con1:wsCallout>
                                      <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-791e</con2:id>
                                      <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/validarServiceClassMetodoLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                      <con1:operation>ValidarServClassMetodo</con1:operation>
                                      <con1:request>
                                        <con1:body>$validarSCMetodoRequest</con1:body>
                                      </con1:request>
                                      <con1:response>
                                        <con1:body>validarSCMetodoResponse</con1:body>
                                      </con1:response>
                                      <con1:requestTransform>
                                        <con1:assign varName="validarSCMetodoRequest">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-78e6</con2:id>
                                          <con1:expr>
                                            <con2:xqueryTransform>
                                              <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_SCMetodo"/>
                                              <con2:param name="serviceClass">
                                                <con2:path>number($contractTemplateResponse/MENSAJE/SERVICE_CLASS)</con2:path>
                                              </con2:param>
                                              <con2:param name="metodo">
                                                <con2:path>data($tramaXML/da:METODO)</con2:path>
                                              </con2:param>
                                            </con2:xqueryTransform>
                                          </con1:expr>
                                        </con1:assign>
                                      </con1:requestTransform>
                                      <con1:responseTransform/>
                                    </con1:wsCallout>
                                    <con1:ifThenElse>
                                      <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-78ab</con2:id>
                                      <con1:case>
                                        <con1:condition>
                                          <con2:xqueryText>data($validarSCMetodoResponse/MENSAJE) = "FALSE"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                          <con1:assign varName="codigoError">
                                            <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7793</con2:id>
                                            <con1:expr>
                                              <con2:xqueryText>"917"</con2:xqueryText>
                                            </con1:expr>
                                          </con1:assign>
                                          <con2:skip>
                                            <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7776</con2:id>
                                          </con2:skip>
                                        </con1:actions>
                                      </con1:case>
                                      <con1:default>
                                        <con1:assign varName="contrato">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-78a9</con2:id>
                                          <con1:expr>
                                            <con2:xqueryText>data($contractTemplateResponse/MENSAJE/CONTRACT_TEMPLATE)</con2:xqueryText>
                                          </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="postpago">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-78a7</con2:id>
                                          <con1:expr>
                                            <con2:xqueryText>data($contractTemplateResponse/MENSAJE/ESPOSTPAGO)</con2:xqueryText>
                                          </con1:expr>
                                        </con1:assign>
                                        <con1:assign varName="categoria">
                                          <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-78a5</con2:id>
                                          <con1:expr>
                                            <con2:xqueryText>data($contractTemplateResponse/MENSAJE/FAFIDGROUP)</con2:xqueryText>
                                          </con1:expr>
                                        </con1:assign>
                                      </con1:default>
                                    </con1:ifThenElse>
                                  </con1:default>
                                </con1:ifThenElse>
                                <con1:wsCallout>
                                  <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7c9c</con2:id>
                                  <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarMercadeoOCSLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                  <con1:operation>ConsultarMercadeoOCS</con1:operation>
                                  <con1:request>
                                    <con1:body>$mercadeoOCSRequest</con1:body>
                                  </con1:request>
                                  <con1:response>
                                    <con1:body>mercadeoOCSResponse</con1:body>
                                  </con1:response>
                                  <con1:requestTransform>
                                    <con1:assign varName="mercadeoOCSRequest">
                                      <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7c9d</con2:id>
                                      <con1:expr>
                                        <con2:xqueryTransform>
                                          <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_consultarMercadeoOCS"/>
                                          <con2:param name="tmcode">
                                            <con2:path>data($validarTramaResponse/MENSAJE/TMCODE)</con2:path>
                                          </con2:param>
                                          <con2:param name="spcode">
                                            <con2:path>data($validarTramaResponse/MENSAJE/SPCODE)</con2:path>
                                          </con2:param>
                                          <con2:param name="codigoMaterial">
                                            <con2:path>data($validarTramaResponse/MENSAJE/CODIGOMATERIAL)</con2:path>
                                          </con2:param>
                                        </con2:xqueryTransform>
                                      </con1:expr>
                                    </con1:assign>
                                  </con1:requestTransform>
                                  <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:ifThenElse>
                                  <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7c12</con2:id>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($mercadeoOCSResponse/CODIGO) != "OK"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7c11</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"909"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($mercadeoOCSResponse/MENSAJE/EXITO) = "NO_DATA"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7c10</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"932"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:default>
                                    <con1:assign varName="cargaInicial">
                                      <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7c0f</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($mercadeoOCSResponse/MENSAJE/OFFERID_AIR)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                    <con1:assign varName="bloquea">
                                      <con2:id>_ActionId-6276521791648075188-7c3020e.13996a1f188.-7c0d</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($mercadeoOCSResponse/MENSAJE/BLOQUEA)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                  </con1:default>
                                </con1:ifThenElse>
                              </con1:default>
                            </con1:ifThenElse>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "101"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7291</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama101/Proxies/validarTrama101Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama101</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7242</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama101/Resources/XQueries/validarTrama101_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7b1e</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="vigencia">
                              <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7aa4</con2:id>
                              <con1:expr>
                                <con2:xqueryText>data($generalResponse/MENSAJE/SDP)</con2:xqueryText>
                              </con1:expr>
                            </con1:assign>
                            <con1:wsCallout>
                              <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7a2a</con2:id>
                              <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarContractTemplateServiceClassOfferLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                              <con1:operation>consultarConTempSCOffer</con1:operation>
                              <con1:request>
                                <con1:body>$contractTemplateRequest</con1:body>
                              </con1:request>
                              <con1:response>
                                <con1:body>contractTemplateResponse</con1:body>
                              </con1:response>
                              <con1:requestTransform>
                                <con1:assign varName="contractTemplateRequest">
                                  <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7a15</con2:id>
                                  <con1:expr>
                                    <con2:xqueryTransform>
                                      <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_consultarContractTemplateOffer"/>
                                      <con2:param name="offer">
                                        <con2:path>data($validarTramaResponse/MENSAJE/OFFER)</con2:path>
                                      </con2:param>
                                    </con2:xqueryTransform>
                                  </con1:expr>
                                </con1:assign>
                              </con1:requestTransform>
                              <con1:responseTransform/>
                            </con1:wsCallout>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7946</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>data($contractTemplateResponse/CODIGO) != "OK"</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:assign varName="codigoError">
                                    <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7771</con2:id>
                                    <con1:expr>
                                      <con2:xqueryText>"909"</con2:xqueryText>
                                    </con1:expr>
                                  </con1:assign>
                                  <con2:skip>
                                    <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7735</con2:id>
                                  </con2:skip>
                                </con1:actions>
                              </con1:case>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>data($contractTemplateResponse/MENSAJE/CONTRACT_TEMPLATE) = "NO_DATA"</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:assign varName="codigoError">
                                    <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-774c</con2:id>
                                    <con1:expr>
                                      <con2:xqueryText>"933"</con2:xqueryText>
                                    </con1:expr>
                                  </con1:assign>
                                  <con2:skip>
                                    <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7717</con2:id>
                                  </con2:skip>
                                </con1:actions>
                              </con1:case>
                              <con1:default>
                                <con1:assign varName="inOrigen">
                                  <con2:id>_ActionId-7289227227976692718--7360c13a.149cf07ee36.-7a10</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>data($contractTemplateResponse/MENSAJE/SERVICE_CLASS)</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                                <con1:wsCallout>
                                  <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7852</con2:id>
                                  <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/validarServiceClassMetodoLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                  <con1:operation>ValidarServClassMetodo</con1:operation>
                                  <con1:request>
                                    <con1:body>$validarSCMetodoRequest</con1:body>
                                  </con1:request>
                                  <con1:response>
                                    <con1:body>validarSCMetodoResponse</con1:body>
                                  </con1:response>
                                  <con1:requestTransform>
                                    <con1:assign varName="validarSCMetodoRequest">
                                      <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7853</con2:id>
                                      <con1:expr>
                                        <con2:xqueryTransform>
                                          <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_SCMetodo"/>
                                          <con2:param name="serviceClass">
                                            <con2:path>number($contractTemplateResponse/MENSAJE/SERVICE_CLASS)</con2:path>
                                          </con2:param>
                                          <con2:param name="metodo">
                                            <con2:path>data($tramaXML/da:METODO)</con2:path>
                                          </con2:param>
                                        </con2:xqueryTransform>
                                      </con1:expr>
                                    </con1:assign>
                                  </con1:requestTransform>
                                  <con1:responseTransform/>
                                </con1:wsCallout>
                                <con1:ifThenElse>
                                  <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-785b</con2:id>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($validarSCMetodoResponse/MENSAJE) = "FALSE"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-785a</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"917"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                      <con2:skip>
                                        <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7859</con2:id>
                                      </con2:skip>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:default>
                                    <con1:assign varName="contrato">
                                      <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7858</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($contractTemplateResponse/MENSAJE/CONTRACT_TEMPLATE)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                    <con1:assign varName="postpago">
                                      <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7857</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($contractTemplateResponse/MENSAJE/ESPOSTPAGO)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                    <con1:assign varName="categoria">
                                      <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7856</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($contractTemplateResponse/MENSAJE/FAFIDGROUP)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                  </con1:default>
                                </con1:ifThenElse>
                              </con1:default>
                            </con1:ifThenElse>
                            <con1:wsCallout>
                              <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7657</con2:id>
                              <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarMercadeoAMOCSLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                              <con1:operation>ConsultarMercadeoAMOCS</con1:operation>
                              <con1:request>
                                <con1:body>$mercadeoOCSRequest</con1:body>
                              </con1:request>
                              <con1:response>
                                <con1:body>mercadeoOCSResponse</con1:body>
                              </con1:response>
                              <con1:requestTransform>
                                <con1:assign varName="mercadeoOCSRequest">
                                  <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7603</con2:id>
                                  <con1:expr>
                                    <con2:xqueryTransform>
                                      <con2:resource ref="ITEL/Core/Resources/XQueries/validar_Req_consultarMercadeoAMOCS"/>
                                      <con2:param name="offer">
                                        <con2:path>data($validarTramaResponse/MENSAJE/OFFER)</con2:path>
                                      </con2:param>
                                      <con2:param name="codigoMaterial">
                                        <con2:path>data($validarTramaResponse/MENSAJE/CODIGOMATERIAL)</con2:path>
                                      </con2:param>
                                    </con2:xqueryTransform>
                                  </con1:expr>
                                </con1:assign>
                              </con1:requestTransform>
                              <con1:responseTransform/>
                            </con1:wsCallout>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-74d3</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>data($mercadeoOCSResponse/CODIGO) != "OK"</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:assign varName="codigoError">
                                    <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-73c6</con2:id>
                                    <con1:expr>
                                      <con2:xqueryText>"909"</con2:xqueryText>
                                    </con1:expr>
                                  </con1:assign>
                                </con1:actions>
                              </con1:case>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>data($mercadeoOCSResponse/MENSAJE/EXITO) = "NO_DATA"</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:assign varName="codigoError">
                                    <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-73b5</con2:id>
                                    <con1:expr>
                                      <con2:xqueryText>"932"</con2:xqueryText>
                                    </con1:expr>
                                  </con1:assign>
                                </con1:actions>
                              </con1:case>
                              <con1:default>
                                <con1:assign varName="cargaInicial">
                                  <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-73a3</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>data($mercadeoOCSResponse/MENSAJE/OFFERID_AIR)</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                                <con1:assign varName="bloquea">
                                  <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-738d</con2:id>
                                  <con1:expr>
                                    <con2:xqueryText>data($mercadeoOCSResponse/MENSAJE/BLOQUEA)</con2:xqueryText>
                                  </con1:expr>
                                </con1:assign>
                              </con1:default>
                            </con1:ifThenElse>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "603"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-964427640171779689-ec893eb.134854095cd.-7c97</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama603/Proxies/validarTrama603Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama603</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:comment>Concatena el MIN con el nmero al que se desea cambiar en la variable parmetros</con2:comment>
                            <con2:id>_ActionId-964427640171779689-ec893eb.134854095cd.-7c98</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama603/Resources/XQueries/validarTrama603_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:assign varName="contrato">
                        <con2:id>_ActionId-5618718265904858971-719f07d0.134d2146c7e.-7c56</con2:id>
                        <con1:expr>
                          <con2:xqueryText>$trama</con2:xqueryText>
                        </con1:expr>
                      </con1:assign>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "602"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-2546228840045636875-6325533c.13484f4d0af.-6cef</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama602/Proxies/validarTrama602Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama602</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-2546228840045636875-6325533c.13484f4d0af.-6cf0</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama602/Resources/XQueries/validarTrama602_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:assign varName="contrato">
                        <con2:id>_ActionId-7727833092661879506-3695eac9.1348f4b4665.-7fce</con2:id>
                        <con1:expr>
                          <con2:xqueryText>$trama</con2:xqueryText>
                        </con1:expr>
                      </con1:assign>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>($operacion = "201" or $operacion = "202" or $operacion = "203" or $operacion = "204" or $operacion = "205" or $operacion = "206" or $operacion = "207" or $operacion = "208" or $operacion = "212" or $operacion = "213" or $operacion = "501" or $operacion = "700" or $operacion = "800" or $operacion = "210") and data($tramaXML/da:CADENA_PARAMETROS) != ''</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:assign varName="validarTramaResponse">
                        <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7fb8</con2:id>
                        <con1:expr>
                          <con2:xqueryText><![CDATA[<val:WS_Result  	xmlns:val="http://www.comcel.com.co/ValidarTramas/">
	<CODIGO>912</CODIGO>
	<MENSAJE>
	</MENSAJE>
	<DESCRIPCION>trama invalida</DESCRIPCION>
</val:WS_Result>]]></con2:xqueryText>
                        </con1:expr>
                      </con1:assign>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "301"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7ef9</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama301/Proxies/validarTrama301Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama301</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7ef6</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama301/Resources/XQueries/validarTrama301_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "302"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7c49</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama302/Proxies/validarTrama302Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama302</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7c4a</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama302/Resources/XQueries/validarTrama302_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "303"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-811886621967503759-1a009cd5.13632515fad.-7932</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama303/Proxies/validarTrama303Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama303</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-811886621967503759-1a009cd5.13632515fad.-7933</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama303/Resources/XQueries/validarTrama303_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "304"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-1322561854153617247--49b2eba4.135b0287864.-7fcc</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama304/Proxies/validarTrama304Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama304</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-1322561854153617247--49b2eba4.135b0287864.-7fcd</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama304/Resources/XQueries/validarTrama304_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "314"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-115449510887105376--45f9c8e6.145be7ff1b4.-7f92</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama314/Proxies/validarTrama314Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama314</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-115449510887105376--45f9c8e6.145be7ff1b4.-7f5a</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama314/Resources/XQueries/validarTrama314_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "315"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-707124088434942540-5a5bd0be.145ae2ac39f.-7c8a</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama315/Proxies/validarTrama315Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama315</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-707124088434942540-5a5bd0be.145ae2ac39f.-7c63</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama315/Resources/XQueries/validarTrama315_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "215"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3645351208375448940--14cfe84a.158f89cfacf.-521f</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama215/Proxies/validarTrama215Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama215</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3645351208375448940--14cfe84a.158f89cfacf.-5200</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama215/Resources/XQueries/validarTrama215_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "312"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-8585969624932901464-7ba7c514.13fa51823a9.-7abd</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama312/Proxies/validarTrama312Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama312</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-8585969624932901464-7ba7c514.13fa51823a9.-7a69</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama312/Resources/XQueries/validarTrama312_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "305"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-4424720064642856453-4d673fa8.13697606751.-7ffb</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama305/Proxies/validarTrama305Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama305</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-4424720064642856453-4d673fa8.13697606751.-7ffc</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama305/Resources/XQueries/validarTrama305_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-4278807260743534015--3f36aea9.136df5bc0ec.-7ee0</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:wsCallout>
                              <con2:id>_ActionId-4278807260743534015--3f36aea9.136df5bc0ec.-7ede</con2:id>
                              <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarHabilitadoSegundoElegidoLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                              <con1:operation>consultarHabilitadoSegundoElegido</con1:operation>
                              <con1:request>
                                <con1:body>$segundoRequest</con1:body>
                              </con1:request>
                              <con1:response>
                                <con1:body>segundoResponse</con1:body>
                              </con1:response>
                              <con1:requestTransform>
                                <con1:assign varName="segundoRequest">
                                  <con2:id>_ActionId-4278807260743534015--3f36aea9.136df5bc0ec.-7edf</con2:id>
                                  <con1:expr>
                                    <con2:xqueryTransform>
                                      <con2:resource ref="ITEL/Core/Resources/XQueries/consultarHabilitadoSegundElegidoPS_Req"/>
                                      <con2:param name="min">
                                        <con2:path>data($tramaXML/da:MIN)</con2:path>
                                      </con2:param>
                                    </con2:xqueryTransform>
                                  </con1:expr>
                                </con1:assign>
                              </con1:requestTransform>
                              <con1:responseTransform/>
                            </con1:wsCallout>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-4278807260743534015--3f36aea9.136df5bc0ec.-7ea6</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>data($segundoResponse/MENSAJE/HABILITADO) != "TRUE"</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:assign varName="codigoError">
                                    <con2:id>_ActionId-4278807260743534015--3f36aea9.136df5bc0ec.-7e7b</con2:id>
                                    <con1:expr>
                                      <con2:xqueryText>"929"</con2:xqueryText>
                                    </con1:expr>
                                  </con1:assign>
                                  <con2:skip>
                                    <con2:id>_ActionId-4278807260743534015--3f36aea9.136df5bc0ec.-7e5e</con2:id>
                                  </con2:skip>
                                </con1:actions>
                              </con1:case>
                              <con1:default/>
                            </con1:ifThenElse>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "306"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-8293588777535050436-6f3c5993.1358ce6525d.-7665</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama306/Proxies/validarTrama306Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama306</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-8293588777535050436-6f3c5993.1358ce6525d.-7666</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama306/Resources/XQueries/validarTrama306_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-788276489308162930--2514565a.13a9d5e6a64.-71e1</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-788276489308162930--2514565a.13a9d5e6a64.-71b2</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>number($generalResponse/MENSAJE/RMCCODIGOIN) > 50 and number($validarTramaResponse/MENSAJE/ELEGIDOFIJO) > 0</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:assign varName="codigoError">
                                    <con2:id>_ActionId-788276489308162930--2514565a.13a9d5e6a64.-7194</con2:id>
                                    <con1:expr>
                                      <con2:xqueryText>912</con2:xqueryText>
                                    </con1:expr>
                                  </con1:assign>
                                </con1:actions>
                              </con1:case>
                              <con1:default/>
                            </con1:ifThenElse>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "307"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3709213966522911369-231e8735.1367486c6dc.-7950</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama307/Proxies/validarTrama307Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama307</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3709213966522911369-231e8735.1367486c6dc.-7951</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama307/Resources/XQueries/validarTrama307_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "308"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-1322561854153617247--49b2eba4.135b0287864.-7fc6</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama308/Proxies/validarTrama308Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama308</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-1322561854153617247--49b2eba4.135b0287864.-7fc7</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama308/Resources/XQueries/validarTrama308_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "311"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-8585969624932901464-7ba7c514.13fa51823a9.-7f03</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama311/Proxies/validarTrama311Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama311</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-8585969624932901464-7ba7c514.13fa51823a9.-7eaf</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama311/Resources/XQueries/validarTrama311_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "309"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-6693003731552977050--77c00d0b.135aaf71891.-7fc3</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama309/Proxies/validarTrama309Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama309</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-6693003731552977050--77c00d0b.135aaf71891.-7fc4</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama309/Resources/XQueries/validarTrama309_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "310"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-5823006968542368613-72ec1483.13f76d84837.-7f36</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama310/Proxies/validarTrama310Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama310</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-5823006968542368613-72ec1483.13f76d84837.-7f0c</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama310/Resources/XQueries/validarTrama310_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-650919862507942970--6e211063.13f8632e713.-7092</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-650919862507942970--6e211063.13f8632e713.-700a</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>number($generalResponse/MENSAJE/RMCCODIGOIN) > 50 and number($validarTramaResponse/MENSAJE/ELEGIDOFIJO) > 0</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con1:assign varName="codigoError">
                                    <con2:id>_ActionId-650919862507942970--6e211063.13f8632e713.-6f8b</con2:id>
                                    <con1:expr>
                                      <con2:xqueryText>912</con2:xqueryText>
                                    </con1:expr>
                                  </con1:assign>
                                </con1:actions>
                              </con1:case>
                              <con1:default/>
                            </con1:ifThenElse>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "313"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-2221623722735529487-1db40fc4.144e54cf8b1.-7f4f</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama313/Proxies/validarTrama313Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama313</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-2221623722735529487-1db40fc4.144e54cf8b1.-7f50</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama313/Resources/XQueries/validarTrama313_Req"/>
                                <con2:param name="min">
                                  <con2:path>data($tramaXML/da:MIN)</con2:path>
                                </con2:param>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "701"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-4731883582742012540--1ed7f88d.136a1a1646b.-788c</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama701/Proxies/validarTrama701Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama701</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-4731883582742012540--1ed7f88d.136a1a1646b.-788d</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama701/Resources/XQueries/validarTrama701_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "702"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7f09</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama702/Proxies/validarTrama702Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama702</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7f0a</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama702/Resources/XQueries/validarTrama702_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "703"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7ee4</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama703/Proxies/validarTrama703Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama703</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7ee5</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama703/Resources/XQueries/validarTrama703_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "704"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7ede</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama704/Proxies/validarTrama704Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama704</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7edf</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama704/Resources/XQueries/validarTrama704_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>$operacion = "705"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:wsCallout>
                        <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7ed5</con2:id>
                        <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Trama705/Proxies/validarTrama705Local_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                        <con1:operation>validarTrama705</con1:operation>
                        <con1:request>
                          <con1:body>$validarTramaRequest</con1:body>
                        </con1:request>
                        <con1:response>
                          <con1:body>validarTramaResponse</con1:body>
                        </con1:response>
                        <con1:requestTransform>
                          <con1:assign varName="validarTramaRequest">
                            <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7ed6</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Trama705/Resources/XQueries/validarTrama705_Req"/>
                                <con2:param name="parametros">
                                  <con2:path>data($tramaXML/da:CADENA_PARAMETROS)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:requestTransform>
                        <con1:responseTransform/>
                      </con1:wsCallout>
                    </con1:actions>
                  </con1:case>
                  <con1:default>
                    <con1:assign varName="validarTramaResponse">
                      <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-79ce</con2:id>
                      <con1:expr>
                        <con2:xqueryText><![CDATA[<val:WS_Result  	xmlns:val="http://www.comcel.com.co/ValidarTramas/">
	<CODIGO>1</CODIGO>
	<MENSAJE>
	</MENSAJE>
	<DESCRIPCION>trama valida</DESCRIPCION>
	</val:WS_Result>]]></con2:xqueryText>
                      </con1:expr>
                    </con1:assign>
                  </con1:default>
                </con1:ifThenElse>
                <con1:ifThenElse>
                  <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-7099</con2:id>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText>data($validarTramaResponse/CODIGO) = "1"</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7d40</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "402"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7e21</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/HOSTID)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>data($validarTramaResponse/MENSAJE/MINORIGEN)</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/COMENTARIO)) then
	""
else
	data($validarTramaResponse/MENSAJE/COMENTARIO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data($validarTramaResponse/MENSAJE/MONTORECARGA)</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/COBROSMS)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>data($validarTramaResponse/MENSAJE/CONSECUTIVO)</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "405"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7d3a</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/HOSTID)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/MINORIGEN)) then
	""
else
	data($validarTramaResponse/MENSAJE/MINORIGEN)</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/DIASVIGENCIA)) then
	""
else
	data($validarTramaResponse/MENSAJE/DIASVIGENCIA)</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/COMENTARIO)) then
	""
else
	data($validarTramaResponse/MENSAJE/COMENTARIO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data($validarTramaResponse/MENSAJE/MONTODEBITO)</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/CUENTA)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/CONSECUTIVO)) then
	""
else
	data($validarTramaResponse/MENSAJE/CONSECUTIVO)</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "410"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-4921274548082121420--69da317d.1453d141c80.-7e7d</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/HOSTID)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/DIASVIGENCIA)) then
	"0"
else
	data($validarTramaResponse/MENSAJE/DIASVIGENCIA)</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/COMENTARIO)) then
	""
else
	data($validarTramaResponse/MENSAJE/COMENTARIO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data($validarTramaResponse/MENSAJE/MONTO)</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/CUENTA)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/CONSECUTIVO)) then
	""
else
	data($validarTramaResponse/MENSAJE/CONSECUTIVO)</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "406"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7e0a</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/HOSTID)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/DIASVIGENCIA)) then
	""
else
	data($validarTramaResponse/MENSAJE/DIASVIGENCIA)</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/COMENTARIO)) then
	""
else
	data($validarTramaResponse/MENSAJE/COMENTARIO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data($validarTramaResponse/MENSAJE/MONTOCREDITO)</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/CUENTA)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/CONSECUTIVO)) then
	""
else
	data($validarTramaResponse/MENSAJE/CONSECUTIVO)</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "407"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-6144870028296626801-739b0c8.1398c6a4d47.-7ff7</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>data($validarTramaResponse/MENSAJE/VOUCHER)</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "200"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7e08</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data($validarTramaResponse/MENSAJE/TIPOCONSULTA)</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/COBRARCONSULTA)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "215"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-3645351208375448940--14cfe84a.158f89cfacf.-51aa</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data($validarTramaResponse/MENSAJE/CANAL)</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ESTADO)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "201" or $operacion = "202" or $operacion = "203" or $operacion = "204" or $operacion = "205" or $operacion = "206" or $operacion = "207"or $operacion = "208" or $operacion = "210" or $operacion = "211" or $operacion = "212" or $operacion = "213" or $operacion = "501" or $operacion = "700" or $operacion = "800"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7dfd</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "500"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7dfb</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/HOSTID)) then
	""
else
	data($validarTramaResponse/MENSAJE/HOSTID)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data($validarTramaResponse/MENSAJE/FECHARECARGA)</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/CONSECUTIVO)) then
	""
else
	data($validarTramaResponse/MENSAJE/CONSECUTIVO)</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "502"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-4132889789295945889--4dae96c2.145d822b89c.-7e2e</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/AIRPTF)</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($validarTramaResponse/MENSAJE/OFFERID)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "503"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-4121053732405088544-7ebba738.158cfb81d2a.-7d1a</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($validarTramaResponse/MENSAJE/OFFERID)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "100"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7df9</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/IMEI)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "101"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-3561869112899623898--2c0dab6c.142fc465c00.-7151</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/IMEI)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "600"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7dba</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>data($validarTramaResponse/MENSAJE/MINORIGEN)</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "601"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-1322561854153617247--49b2eba4.135b0287864.-71be</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/OPERACIONCOBRO)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data($validarTramaResponse/MENSAJE/TMCODE)</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/SPCODE)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "604"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-2136301715180315283--62e33a73.143011032cf.-6283</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/OPERACIONCOBRO)</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "602"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7db8</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:BLOQUEARFRAUDE )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:BLOQUEAROTRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "603"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7db6</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/HOTKIT)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "301"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7db4</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDO)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>data($validarTramaResponse/MENSAJE/VIGENCIA)</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FAFID )</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:OPERACIONCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FECHAREGISTRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "302"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-7051547070538756707--c80fc17.1357752e02c.-7c46</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDO)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:OPERACIONCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FECHAMODIFICACION )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "303"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-811886621967503759-1a009cd5.13632515fad.-792f</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:OPERACIONCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FECHARENOVACION )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "304"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-1322561854153617247--49b2eba4.135b0287864.-7fd2</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOS)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($tramaXML/da:USUARIO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:TIPOELIMINACION )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOELIMINACION )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "314"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-115449510887105376--45f9c8e6.145be7ff1b4.-7d1d</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOS)</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($tramaXML/da:USUARIO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:OFERTA )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOSREEMPLAZAR)</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "315"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-707124088434942540-5a5bd0be.145ae2ac39f.-7b9e</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOS)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($tramaXML/da:USUARIO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:OFERTA )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOELIMINACION )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "312"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-8585969624932901464-7ba7c514.13fa51823a9.-7963</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOS)</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($tramaXML/da:USUARIO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOELIMINACION )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "305"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-4424720064642856453-4d673fa8.13697606751.-7ff8</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:ELEGIDO )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:VIGENCIA )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "306"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-8293588777535050436-6f3c5993.1358ce6525d.-7662</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:ELEGIDOFIJO )</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:ELEGIDOS )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "307"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-3709213966522911369-231e8735.1367486c6dc.-78dc</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>data($validarTramaResponse/MENSAJE/VIGENCIA)</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($validarTramaResponse/MENSAJE/FECHAREGISTRO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:ELEGIDOS )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "308"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-1322561854153617247--49b2eba4.135b0287864.-7f83</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOS)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOSREEMPLAZAR)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FECHAREGISTRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "311"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-8585969624932901464-7ba7c514.13fa51823a9.-7da9</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOS)</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOSREEMPLAZAR)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FECHAREGISTRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "309"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-6693003731552977050--77c00d0b.135aaf71891.-7fbe</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDO)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>data($validarTramaResponse/MENSAJE/VIGENCIA)</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FECHAREGISTRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "310"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-5823006968542368613-72ec1483.13f76d84837.-7deb</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="hostId">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:ELEGIDOFIJO )</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:ELEGIDOS )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "313"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-2221623722735529487-1db40fc4.144e54cf8b1.-7da9</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="hostId">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:OFERTA )</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:VIGENCIA )</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:ELEGIDOS )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "701"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-4731883582742012540--1ed7f88d.136a1a1646b.-787b</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOS)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>data($validarTramaResponse/MENSAJE/VIGENCIA)</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FECHAREGISTRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCUENTA )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "702"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7f06</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOS)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>data($validarTramaResponse/MENSAJE/ELEGIDOSREEMPLAZAR)</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FECHAREGISTRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCUENTA )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "703"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7eea</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:FECHARENOVACION )</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCUENTA )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "704"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7edb</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:ELEGIDOS )</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:ELIMINARTODOS )</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCUENTA )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:TIPOELIMINACION )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>data($tramaXML/da:USUARIO)</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "705"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-3240996374908289818-134d2eb4.136bb68b4fc.-7ed0</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:VIGENCIA )</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CANTIDADMENSAJES )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "409"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-3738246199404536167--3fed7bd5.13f7be9077c.-73a1</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:RECURRENTE )</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOPAQUETE )</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGOCOBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "414"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-2253312439982545409-5f03a207.1531049037b.-6601</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="hostId">
                                    <con2:path>data($validarTramaResponse/MENSAJE/HOSTID)</con2:path>
                                  </con2:param>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>data($validarTramaResponse/MENSAJE/CODIGO_COBRO)</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data($validarTramaResponse/MENSAJE/COMENTARIO)</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data($validarTramaResponse/MENSAJE/CODIGO_PAQUETE)</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>data($validarTramaResponse/MENSAJE/CONSECUTIVO)</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = "415"</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:assign varName="parametrosTrama">
                              <con2:id>_ActionId-8044975483918427659-3220e920.15853e81890.-7ed0</con2:id>
                              <con1:expr>
                                <con2:xqueryTransform>
                                  <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                  <con2:param name="minOrigen">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="hostId">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="diasVigencia">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                  <con2:param name="comentario">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGO_PAQUETE_SM )</con2:path>
                                  </con2:param>
                                  <con2:param name="monto">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGO_CANAL )</con2:path>
                                  </con2:param>
                                  <con2:param name="bonificar">
                                    <con2:path>data( $validarTramaResponse/*:MENSAJE/*:CODIGO_COBRO )</con2:path>
                                  </con2:param>
                                  <con2:param name="consecutivo">
                                    <con2:path>""</con2:path>
                                  </con2:param>
                                </con2:xqueryTransform>
                              </con1:expr>
                            </con1:assign>
                          </con1:actions>
                        </con1:case>
                        <con1:default>
                          <con1:assign varName="parametrosTrama">
                            <con2:id>_ActionId-2253312439982545409-5f03a207.1531049037b.-6603</con2:id>
                            <con1:expr>
                              <con2:xqueryTransform>
                                <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                                <con2:param name="hostId">
                                  <con2:path>data($validarTramaResponse/MENSAJE/HOSTID)</con2:path>
                                </con2:param>
                                <con2:param name="minOrigen">
                                  <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/MINORIGEN)) then
	""
else
	data($validarTramaResponse/MENSAJE/MINORIGEN)</con2:path>
                                </con2:param>
                                <con2:param name="diasVigencia">
                                  <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/DIASVIGENCIA)) then
	""
else
	data($validarTramaResponse/MENSAJE/DIASVIGENCIA)</con2:path>
                                </con2:param>
                                <con2:param name="comentario">
                                  <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/COMENTARIO)) then
	""
else
	data($validarTramaResponse/MENSAJE/COMENTARIO)</con2:path>
                                </con2:param>
                                <con2:param name="monto">
                                  <con2:path>data($validarTramaResponse/MENSAJE/MONTORECARGA)</con2:path>
                                </con2:param>
                                <con2:param name="bonificar">
                                  <con2:path>data($validarTramaResponse/MENSAJE/BONIFICAR)</con2:path>
                                </con2:param>
                                <con2:param name="consecutivo">
                                  <con2:path>if (fn:empty($validarTramaResponse/MENSAJE/CONSECUTIVO)) then
	""
else
	data($validarTramaResponse/MENSAJE/CONSECUTIVO)</con2:path>
                                </con2:param>
                              </con2:xqueryTransform>
                            </con1:expr>
                          </con1:assign>
                        </con1:default>
                      </con1:ifThenElse>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7950</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$operacion = ("400","401","402","403","405","406","408","410","411","414")</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:wsCallout>
                              <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7944</con2:id>
                              <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarHostIdLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                              <con1:operation>consultarHostId</con1:operation>
                              <con1:request>
                                <con1:body>$hostIdRequest</con1:body>
                              </con1:request>
                              <con1:response>
                                <con1:body>hostIdResponse</con1:body>
                              </con1:response>
                              <con1:requestTransform>
                                <con1:assign varName="hostIdRequest">
                                  <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7949</con2:id>
                                  <con1:expr>
                                    <con2:xqueryTransform>
                                      <con2:resource ref="ITEL/Core/Resources/XQueries/consultarHostId_Req"/>
                                      <con2:param name="hostId">
                                        <con2:path>$validarTramaResponse/MENSAJE/HOSTID/text()</con2:path>
                                      </con2:param>
                                    </con2:xqueryTransform>
                                  </con1:expr>
                                </con1:assign>
                              </con1:requestTransform>
                              <con1:responseTransform>
                                <con1:ifThenElse>
                                  <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7948</con2:id>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($hostIdResponse/CODIGO) != "OK"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7947</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"909"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($hostIdResponse/MENSAJE/HIDESTADO) = "0"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7946</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"946"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($hostIdResponse/MENSAJE/HIDESTADO) = ""</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-440002342435620209--3fe474f1.133d60c8086.-7945</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"945"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:default/>
                                </con1:ifThenElse>
                              </con1:responseTransform>
                            </con1:wsCallout>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-664c</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$codigoError = "1" and fn:not(fn:empty($validarTramaResponse/MENSAJE/MINORIGEN)) and data($validarTramaResponse/MENSAJE/MINORIGEN) != ""</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:wsCallout>
                              <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-65bd</con2:id>
                              <con1:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarRangoMinLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                              <con1:operation>consultarRangoMin</con1:operation>
                              <con1:request>
                                <con1:body>$rangoMinOrigenRequest</con1:body>
                              </con1:request>
                              <con1:response>
                                <con1:body>rangoMinOrigenResponse</con1:body>
                              </con1:response>
                              <con1:requestTransform>
                                <con1:assign varName="rangoMinOrigenRequest">
                                  <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-65c3</con2:id>
                                  <con1:expr>
                                    <con2:xqueryTransform>
                                      <con2:resource ref="ITEL/Core/Resources/XQueries/consultarRangoMin_Req"/>
                                      <con2:param name="min">
                                        <con2:path>data($validarTramaResponse/MENSAJE/MINORIGEN)</con2:path>
                                      </con2:param>
                                    </con2:xqueryTransform>
                                  </con1:expr>
                                </con1:assign>
                              </con1:requestTransform>
                              <con1:responseTransform>
                                <con1:ifThenElse>
                                  <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-65c2</con2:id>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($rangoMinOrigenResponse/CODIGO) != "OK"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-65c1</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"909"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($rangoMinOrigenResponse/MENSAJE/RMCESTADO) = "0"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-65c0</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"938"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:case>
                                    <con1:condition>
                                      <con2:xqueryText>data($rangoMinOrigenResponse/MENSAJE/RMCESTADO) = "-1"</con2:xqueryText>
                                    </con1:condition>
                                    <con1:actions>
                                      <con1:assign varName="codigoError">
                                        <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-65bf</con2:id>
                                        <con1:expr>
                                          <con2:xqueryText>"934"</con2:xqueryText>
                                        </con1:expr>
                                      </con1:assign>
                                    </con1:actions>
                                  </con1:case>
                                  <con1:default>
                                    <con1:ifThenElse>
                                      <con2:id>_ActionId-5226781073812836962-15d53666.139f8e33b25.-3c0b</con2:id>
                                      <con1:case>
                                        <con1:condition>
                                          <con2:xqueryText>number($rangoMinOrigenResponse/MENSAJE/RMCCODIGOIN) >= 50 and $operacion = "600"</con2:xqueryText>
                                        </con1:condition>
                                        <con1:actions>
                                          <con1:assign varName="vigencia">
                                            <con2:id>_ActionId-5226781073812836962-15d53666.139f8e33b25.-3c0a</con2:id>
                                            <con1:expr>
                                              <con2:xqueryText>data($rangoMinOrigenResponse/MENSAJE/SDP)</con2:xqueryText>
                                            </con1:expr>
                                          </con1:assign>
                                        </con1:actions>
                                      </con1:case>
                                      <con1:default/>
                                    </con1:ifThenElse>
                                    <con1:assign varName="inOrigen">
                                      <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-65be</con2:id>
                                      <con1:expr>
                                        <con2:xqueryText>data($rangoMinOrigenResponse/MENSAJE/RMCCODIGOIN)</con2:xqueryText>
                                      </con1:expr>
                                    </con1:assign>
                                  </con1:default>
                                </con1:ifThenElse>
                              </con1:responseTransform>
                            </con1:wsCallout>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                      <con1:ifThenElse>
                        <con2:id>_ActionId-2603712737782066722--846ae4d.14769240676.-7520</con2:id>
                        <con1:case>
                          <con1:condition>
                            <con2:xqueryText>$codigoError = "1" and $operacion = ('200','201','212','400','401','402','403','407','408')</con2:xqueryText>
                          </con1:condition>
                          <con1:actions>
                            <con1:ifThenElse>
                              <con2:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7fae</con2:id>
                              <con1:case>
                                <con1:condition>
                                  <con2:xqueryText>$codigoError = "1" and $operacion = ('212')</con2:xqueryText>
                                </con1:condition>
                                <con1:actions>
                                  <con6:wsCallout xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/typesystem/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con6="http://www.bea.com/wli/sb/stages/transform/config">
                                    <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7f1f</con1:id>
                                    <con6:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarCuentasOCSPAQLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                    <con6:operation>consultarCuentasOCS</con6:operation>
                                    <con6:request>
                                      <con6:body>$consultarCuentasOCSRequest</con6:body>
                                    </con6:request>
                                    <con6:response>
                                      <con6:body>consultarCuentasOCSResponse</con6:body>
                                    </con6:response>
                                    <con6:requestTransform>
                                      <con6:replace varName="consultarCuentasOCSRequest" contents-only="false">
                                        <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7f23</con1:id>
                                        <con6:expr>
                                          <con1:xqueryTransform>
                                            <con1:resource ref="ITEL/Core/Resources/XQueries/ejecutarReglasNegocio_Req_consultarCuentasOCS"/>
                                          </con1:xqueryTransform>
                                        </con6:expr>
                                      </con6:replace>
                                    </con6:requestTransform>
                                    <con6:responseTransform>
                                      <con6:ifThenElse>
                                        <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7f22</con1:id>
                                        <con6:case>
                                          <con6:condition>
                                            <con1:xqueryText>data($consultarCuentasOCSResponse/CODIGO) = 'ERROR'</con1:xqueryText>
                                          </con6:condition>
                                          <con6:actions>
                                            <con6:assign varName="codigoError ">
                                              <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7f21</con1:id>
                                              <con6:expr>
                                                <con1:xqueryText>"909"</con1:xqueryText>
                                              </con6:expr>
                                            </con6:assign>
                                          </con6:actions>
                                        </con6:case>
                                        <con6:default>
                                          <con6:insert varName="parametrosTrama">
                                            <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7f20</con1:id>
                                            <con6:where>last-child</con6:where>
                                            <con6:expr>
                                              <con1:xqueryText>&lt;da:CUENTASDA>{data($consultarCuentasOCSResponse/MENSAJE/*:CUENTA)}&lt;/da:CUENTASDA></con1:xqueryText>
                                            </con6:expr>
                                          </con6:insert>
                                        </con6:default>
                                      </con6:ifThenElse>
                                    </con6:responseTransform>
                                  </con6:wsCallout>
                                </con1:actions>
                              </con1:case>
                              <con1:default>
                                <con6:wsCallout xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/typesystem/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con6="http://www.bea.com/wli/sb/stages/transform/config">
                                  <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7fa4</con1:id>
                                  <con6:service xsi:type="ref:ProxyRef" ref="ITEL/Core/Proxies/consultarCuentasOCSLocal_PS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                                  <con6:operation>consultarCuentasOCS</con6:operation>
                                  <con6:request>
                                    <con6:body>$consultarCuentasOCSRequest</con6:body>
                                  </con6:request>
                                  <con6:response>
                                    <con6:body>consultarCuentasOCSResponse</con6:body>
                                  </con6:response>
                                  <con6:requestTransform>
                                    <con6:replace varName="consultarCuentasOCSRequest" contents-only="false">
                                      <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7fa8</con1:id>
                                      <con6:expr>
                                        <con1:xqueryTransform>
                                          <con1:resource ref="ITEL/Core/Resources/XQueries/ejecutarReglasNegocio_Req_consultarCuentasOCS"/>
                                        </con1:xqueryTransform>
                                      </con6:expr>
                                    </con6:replace>
                                  </con6:requestTransform>
                                  <con6:responseTransform>
                                    <con6:ifThenElse>
                                      <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7fa7</con1:id>
                                      <con6:case>
                                        <con6:condition>
                                          <con1:xqueryText>data($consultarCuentasOCSResponse/CODIGO) = 'ERROR'</con1:xqueryText>
                                        </con6:condition>
                                        <con6:actions>
                                          <con6:assign varName="codigoError ">
                                            <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7fa6</con1:id>
                                            <con6:expr>
                                              <con1:xqueryText>"909"</con1:xqueryText>
                                            </con6:expr>
                                          </con6:assign>
                                        </con6:actions>
                                      </con6:case>
                                      <con6:default>
                                        <con6:insert varName="parametrosTrama">
                                          <con1:id>_ActionId-4405696077083321487--68e07921.158b8e1a010.-7fa5</con1:id>
                                          <con6:where>last-child</con6:where>
                                          <con6:expr>
                                            <con1:xqueryText>&lt;da:CUENTASDA>{data($consultarCuentasOCSResponse/MENSAJE/*:CUENTA)}&lt;/da:CUENTASDA></con1:xqueryText>
                                          </con6:expr>
                                        </con6:insert>
                                      </con6:default>
                                    </con6:ifThenElse>
                                  </con6:responseTransform>
                                </con6:wsCallout>
                              </con1:default>
                            </con1:ifThenElse>
                          </con1:actions>
                        </con1:case>
                        <con1:default/>
                      </con1:ifThenElse>
                    </con1:actions>
                  </con1:case>
                  <con1:default>
                    <con1:assign varName="codigoError">
                      <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-708d</con2:id>
                      <con1:expr>
                        <con2:xqueryText>data($validarTramaResponse/CODIGO)</con2:xqueryText>
                      </con1:expr>
                    </con1:assign>
                  </con1:default>
                </con1:ifThenElse>
              </con1:actions>
            </con1:case>
            <con1:default/>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="PipelinePairNode1_response">
      <con:stage name="respuesta">
        <con:context>
          <con2:userNsDecl namespace="http://www.comcel.com.co/DA_TRAMA" prefix="da"/>
          <con2:varNsDecl namespace="http://www.comcel.com.co/ValidarTrama/" prefix="val"/>
        </con:context>
        <con:actions>
          <con1:assign varName="duracionGeneral">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-718d</con2:id>
            <con1:expr>
              <con2:xqueryText>fn:seconds-from-duration(xs:dateTime($tiempoGeneral) - xs:dateTime($tiempoInicio)) * 1000</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="duracionEspecifica">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-718a</con2:id>
            <con1:expr>
              <con2:xqueryText>fn:seconds-from-duration(fn:current-dateTime() - xs:dateTime($tiempoGeneral)) * 1000</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:ifThenElse>
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-7074</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText>fn:not(fn:exists($parametrosTrama))</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="parametrosTrama">
                  <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-6a4e</con2:id>
                  <con1:expr>
                    <con2:xqueryTransform>
                      <con2:resource ref="ITEL/Core/Resources/XQueries/adaptarParametrosValidarTrama"/>
                      <con2:param name="hostId">
                        <con2:path>""</con2:path>
                      </con2:param>
                      <con2:param name="minOrigen">
                        <con2:path>""</con2:path>
                      </con2:param>
                      <con2:param name="diasVigencia">
                        <con2:path>""</con2:path>
                      </con2:param>
                      <con2:param name="comentario">
                        <con2:path>""</con2:path>
                      </con2:param>
                      <con2:param name="monto">
                        <con2:path>""</con2:path>
                      </con2:param>
                      <con2:param name="bonificar">
                        <con2:path>""</con2:path>
                      </con2:param>
                      <con2:param name="consecutivo">
                        <con2:path>""</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con1:expr>
                </con1:assign>
              </con1:actions>
            </con1:case>
            <con1:default/>
          </con1:ifThenElse>
          <con1:ifThenElse>
            <con2:id>_ActionId-6255487451235268146--72e7d3e0.13dff1c4afd.-7fc9</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText>$operacion = '408' and $codigoError = '1'</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:replace varName="tramaXML" contents-only="true">
                  <con2:id>_ActionId-6255487451235268146--72e7d3e0.13dff1c4afd.-7f91</con2:id>
                  <con1:location>
                    <con2:xpathText>./*:METODO</con2:xpathText>
                  </con1:location>
                  <con1:expr>
                    <con2:xqueryText>'400'</con2:xqueryText>
                  </con1:expr>
                </con1:replace>
              </con1:actions>
            </con1:case>
            <con1:default/>
          </con1:ifThenElse>
          <con1:insert varName="tramaXML">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-6a75</con2:id>
            <con1:location/>
            <con1:where>last-child</con1:where>
            <con1:expr>
              <con2:xqueryText>$parametrosTrama</con2:xqueryText>
            </con1:expr>
          </con1:insert>
          <con1:replace varName="body" contents-only="true">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-668f</con2:id>
            <con1:expr>
              <con2:xqueryTransform>
                <con2:resource ref="ITEL/Core/Resources/XQueries/validarTrama_Res"/>
                <con2:param name="codigoError">
                  <con2:path>$codigoError</con2:path>
                </con2:param>
                <con2:param name="inOrigen">
                  <con2:path>$inOrigen</con2:path>
                </con2:param>
                <con2:param name="contratoEsPostpago">
                  <con2:path>$postpago</con2:path>
                </con2:param>
                <con2:param name="vigencia">
                  <con2:path>$vigencia</con2:path>
                </con2:param>
                <con2:param name="timeouts">
                  <con2:path>(xs:integer($timeoutValidacion), xs:integer($timeoutConsulta), xs:integer($timeoutProvision), xs:integer($timeoutFinal))</con2:path>
                </con2:param>
                <con2:param name="contrato">
                  <con2:path>$contrato</con2:path>
                </con2:param>
                <con2:param name="inDestino">
                  <con2:path>$inDestino</con2:path>
                </con2:param>
                <con2:param name="bloquea">
                  <con2:path>$bloquea</con2:path>
                </con2:param>
                <con2:param name="descripcion">
                  <con2:path>"Ejecucion finalizada"</con2:path>
                </con2:param>
                <con2:param name="cargaInicial">
                  <con2:path>$cargaInicial</con2:path>
                </con2:param>
                <con2:param name="categoria">
                  <con2:path>$categoria</con2:path>
                </con2:param>
                <con2:param name="tramaXML">
                  <con2:path>$tramaXML</con2:path>
                </con2:param>
                <con2:param name="duraciones">
                  <con2:path>(xs:integer($duracionGeneral), xs:integer($duracionEspecifica))</con2:path>
                </con2:param>
                <con2:param name="plataforma">
                  <con2:path>if($operacion = '408') then
	'408'
else
	$plataforma</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-3166700838857645387--551f9b11.133cb9965be.-7a5a">
      <con:stage name="error">
        <con:context/>
        <con:actions>
          <con1:assign varName="codigoError">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-6ed9</con2:id>
            <con1:expr>
              <con2:xqueryText>"913"</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="trama">
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-7a16</con2:id>
            <con1:expr>
              <con2:xqueryText>""</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="tramaXML">
            <con2:id>_ActionId-1221286005379866550-2eef8a52.133dad8f688.-7ff9</con2:id>
            <con1:expr>
              <con2:xqueryTransform>
                <con2:resource ref="ITEL/Core/Resources/XQueries/descomponerTrama"/>
                <con2:param name="trama">
                  <con2:path>$trama</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con2:resume>
            <con2:id>_ActionId-3166700838857645387--551f9b11.133cb9965be.-7a01</con2:id>
          </con2:resume>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-5397323786778872077-1949b508.13aae0241a8.-7fad">
      <con:stage name="error1">
        <con:context/>
        <con:actions>
          <con1:assign varName="codigoError">
            <con2:id>_ActionId-5397323786778872077-1949b508.13aae0241a8.-7f9a</con2:id>
            <con1:expr>
              <con2:xqueryText>"909"</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con2:resume>
            <con2:id>_ActionId-5397323786778872077-1949b508.13aae0241a8.-7f7b</con2:id>
          </con2:resume>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:flow>
      <con:pipeline-node name="PipelinePairNode1">
        <con:request>PipelinePairNode1_request</con:request>
        <con:response>PipelinePairNode1_response</con:response>
      </con:pipeline-node>
    </con:flow>
  </ser:router>
</xml-fragment>